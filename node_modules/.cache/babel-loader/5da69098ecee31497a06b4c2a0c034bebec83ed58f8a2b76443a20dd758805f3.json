{"ast":null,"code":"import _regeneratorRuntime from\"F:/LBI/FE_BI/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"F:/LBI/FE_BI/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/LBI/FE_BI/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Link,useNavigate,useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditUser=function EditUser(){var _ref,_ref3;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),existingData=_useState8[0],setExistingData=_useState8[1];// State to store existing data\nvar navigate=useNavigate();var _useParams=useParams(),id=_useParams.id;useEffect(function(){getUserById();},[]);var getUserById=function getUserById(){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:5000/users/\".concat(id));case 2:response=_context.sent;setName(response.data.name);setEmail(response.data.email);case 5:case\"end\":return _context.stop();}},_callee);}))).apply(this,arguments);};useEffect(function(){var _ref2;// Fetch existing data from the server\nvar fetchExistingData=function fetchExistingData(){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"http://localhost:5000/users\");case 3:response=_context2.sent;setExistingData(response.data);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}))).apply(this,arguments);};fetchExistingData();},[]);var saveUser=function saveUser(_x){return(_ref3=_ref3||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:e.preventDefault();// Check if any of the required fields are empty\nif(!(!name||!email)){_context3.next=4;break;}setError(\"Please fill in all required fields.\");return _context3.abrupt(\"return\");case 4:if(!existingData.some(function(user){return user.name===name||user.email===email;})){_context3.next=7;break;}setError(\"Name or email Sudah Dipakai\");return _context3.abrupt(\"return\");case 7:_context3.prev=7;_context3.next=10;return axios.post(\"http://localhost:5000/users\",{name:name,email:email});case 10:navigate(\"/\");_context3.next=16;break;case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](7);console.log(_context3.t0);case 16:case\"end\":return _context3.stop();}},_callee3,null,[[7,13]]);}))).apply(this,arguments);};return/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(\"div\",{class:\"box\",style:{width:\"50%\",margin:\"0 auto\",marginTop:\"50px\",paddingBottom:\"70px\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"columns mt-5 is-centered\",children:/*#__PURE__*/_jsx(\"div\",{className:\"column is-half\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:saveUser,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",value:name,onChange:function onChange(e){return setName(e.target.value);},placeholder:\"Name\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},placeholder:\"Email\"})})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"has-text-danger\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button is-success\",type:\"submit\",children:\"Tambah\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"button is-normal is-danger ml-2\",children:\"Kembali\"})]})]})})})})});};export default EditUser;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}