{"ast":null,"code":"import _regeneratorRuntime from\"F:/LBI/FE_BI/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"F:/LBI/FE_BI/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/LBI/FE_BI/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Link,useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddUser=function AddUser(){var _ref2;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),point=_useState6[0],setPoint=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),existingData=_useState10[0],setExistingData=_useState10[1];// State to store existing data\nvar navigate=useNavigate();useEffect(function(){var _ref;// Fetch existing data from the server\nvar fetchExistingData=function fetchExistingData(){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:5000/users\");case 3:response=_context.sent;setExistingData(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}))).apply(this,arguments);};fetchExistingData();},[]);var saveUser=function saveUser(_x){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var pointValue;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();// Check if any of the required fields are empty\nif(!(!name||!email||!point)){_context2.next=4;break;}setError(\"Please fill in all required fields.\");return _context2.abrupt(\"return\");case 4:// Check if the 'point' is within the range of 0 to 100\npointValue=parseInt(point,10);if(!(pointValue<0||pointValue>100)){_context2.next=8;break;}setError(\"Point must be between 0 and 100.\");return _context2.abrupt(\"return\");case 8:if(!existingData.some(function(user){return user.name===name||user.email===email;})){_context2.next=11;break;}setError(\"Name or email Sudah Dipakai\");return _context2.abrupt(\"return\");case 11:_context2.prev=11;_context2.next=14;return axios.post(\"http://localhost:5000/users\",{name:name,email:email,point:pointValue});case 14:navigate(\"/\");_context2.next=20;break;case 17:_context2.prev=17;_context2.t0=_context2[\"catch\"](11);console.log(_context2.t0);case 20:case\"end\":return _context2.stop();}},_callee2,null,[[11,17]]);}))).apply(this,arguments);};return/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(\"div\",{class:\"box\",style:{width:\"50%\",margin:\"0 auto\",marginTop:\"50px\",paddingBottom:\"70px\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"columns mt-5 is-centered\",children:/*#__PURE__*/_jsx(\"div\",{className:\"column is-half\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:saveUser,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",value:name,onChange:function onChange(e){return setName(e.target.value);},placeholder:\"Name\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},placeholder:\"Email\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Point\"}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"input\",value:point,onChange:function onChange(e){return setPoint(e.target.value);},placeholder:\"Point\"})})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"has-text-danger\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button is-success\",type:\"submit\",children:\"Tambah\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"button is-normal is-danger ml-2\",children:\"Kembali\"})]})]})})})})});};export default AddUser;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}